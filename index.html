<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- CSS de Bootstrap-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Trispace:wght@300;400;600&display=swap");

            :root {
                --bs-body-font-family: "Trispace", sans-serif;
                --bs-body-color: #eef;
                --bs-body-bg: #10121c;
            }
        </style>
        <title>Introducción al Desarrollo…
[6:19 p. m., 5/5/2022] Ale: <!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- CSS de Bootstrap-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Trispace:wght@300;400;600&display=swap");

            :root {
                --bs-body-font-family: "Trispace", sans-serif;
                --bs-body-color: #eef;
                --bs-body-bg: #10121c;
            }
        </style>
        <title>Introducción al Desarrollo Front End con HTML, CSS y JavaScript</title>
    </head>
    <body>
        <header>
            <div class="container">
                <div class="row pt-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                        <h1 class="display-4 text-center py-2">Breaking Bad</h1>
                        <p class="lead">
                          Breaking Bad es una serie de televisión dramática estadounidense creada y producida por Vince Gilligan. Narra la historia de Walter White (Bryan Cranston), un profesor de química con problemas económicos a quien le diagnostican un cáncer de pulmón inoperable. Para pagar su tratamiento y asegurar el futuro económico de su familia, comienza a cocinar y vender metanfetamina,4​ junto con Jesse Pinkman (Aaron Paul), un antiguo alumno suyo.
                        </p>
                        <p>
                          Breaking Bad ha sido aclamada con entusiasmo por buena parte de la crítica​ y del público, y está considerada como una de las mejores series televisivas de todos los tiempos.
                        </p>

                    </div>
                </div>
            </div>
        </header>

        <main class="container">
            <div class="accordion mx-md-5 my-5 rounded-0" id="accordionExample">
                <!--Edades de pasajeros-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header bg-dark" id="headingOne">
                        <button class="accordion-button rounded-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Primer gráfico</button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                          Personajes que esten vivos y muertos.
                            </p>
                            <div class="col-md-6 mx-auto mb-3">
                                <canvas id="primerchart" width="100" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Pasajeras y pasajeros-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Segundo gráfico</button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>Personajes que tienen cumpleaños.</p>
                            <div class="col-md-6 mx-auto mb-3">
                                <canvas id="segundochart" width="100" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Clases-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Tercer gráfico</button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                              Personajes que aparezcan en Better call Saul.
                            </p>
                            <div class="col-md-6 mx-auto mb-3">
                                <canvas id="tercerchart" width="100" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Sobrevivientes por clases-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">Cuarto gráfico</button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                              Personajes que salgan en mas de 2 temporadas.
                            </p>
                            <canvas id="cuartochart" width="100" height="30"></canvas>
                        </div>
                    </div>
                </div>
                <!--Mujeres y niños primero-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingFive">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">quinto grafico</button>
                    </h2>
                    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>quinto grafico</p>
                            <canvas id="quintochart" width="100" height="30"></canvas>
                        </div>
                    </div>
                </div>
                <!--Fin-->



            </div>
            <div class="row">
                <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                    <p></p>
                </div>
            </div>
        </main>

        <aside>
            <div class="container">
                <div class="row py-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto small text-center">
                        <p>
                            Fuentes: <a href="https://historia.nationalgeographic.com.es/a/historia-titanic-tragedia-barco-insumergible_16344">La historia del Titanic, la tragedia del barco insumergible</a>,
                            <a href="https://rpubs.com/paraneda/titanic">RPubs - Titanic</a>, otra y otra más.
                        </p>
                    </div>
                </div>
            </div>
        </aside>

        <footer>
            <div class="container">
                <div class="row">
                    <div class="col"><p class="text-muted mt-5 text-center small">Bootstrap v5.1 y Charts.js</p></div>
                </div>
            </div>
        </footer>

        <!-- Biblioteca de Bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <!-- Biblioteca Chart.js -->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"
            integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <!-- Un gran script, que contiene una función asincrónica para ir a buscar un JSON con -->
        <script>
            async function todo() {
                //el fetch
                const consulta = await fetch("https://raw.githubusercontent.com/auroraborealec/datos/main/datos.json");
                const data = await consulta.json();

                console.log(data) ;

                var statusVivo= 0;
                var statusMuerto= 0;
                var statusDesconocido= 0;
                var seSabe= 0;
                var noSeSabe= 0;
                var aparece= 0;
                var noAparece= 0;
                var masDeDos= 0;
                var menosDeDos= 0;





                //consultando en cada elemento del arreglo
                data.forEach((d) => {
                  console.log(d.status);
                  if(d.status=="Alive")
                    {
                      statusVivo=statusVivo+1;
                    }
                  else if(d.status=="Deceased")
                    {
                      statusMuerto=statusMuerto+1;
                    }
                  else {
                      statusDesconocido=statusDesconocido+1;
                  }
                  if(d.birthday=="Unknown")
                  {
                    noSeSabe=noSeSabe+1;
                  }
                  else {
                    seSabe=seSabe+1;
                  }
                  if(d.better_call_saul_appearance.length>0){
                    aparece=aparece+1;
                  }
                  else {
                    noAparece=noAparece+1;
                  }
                  if(d.appearance.length>2){
                    masDeDos++;

                  }
                  else {
                    menosDeDos++;
                  }
                });

                //edades
                new Chart(document.getElementById("primerchart").getContext("2d"), {
                    type: "doughnut",
                    data: {
                        labels: ["Vivo", "Muerto", "Desconocido"],
                        datasets: [{ data: [statusVivo, statusMuerto, statusDesconocido], label: "Estado de los personajes", backgroundColor: ["#F06EC4", "#AB72F7", "#7396E0"] }],
                    },
                    options: {
                        animation: false,
                        layout: {
                            padding: 10,
                        },
                    },
                });

                //hombres y mujeres
                new Chart(document.getElementById("segundochart").getContext("2d"), {
                    type: "bar",
                    data: {
                        labels: ["cumpleaños desconocido", "cumpleaños conocido"],
                        datasets: [{ data: [noSeSabe, seSabe], label: "cumpleaños de los personajes", backgroundColor: ["#8856a7", "#495F8F"] }],
                    },
                    options: {
                        animation: false,
                        layout: {
                            padding: 10,
                        },
                    },
                });

                // clases
                new Chart(document.getElementById("tercerchart").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["aparece", "no aparece"],
                        datasets: [{ data: [aparece, noAparece], label: "Aparece en Better call Saul", backgroundColor: ["#D9B4B2", "#9EBCDA"] }],
                    },
                    options: {
                        animation: false,
                        layout: {
                            padding: 10,
                        },
                    },
                });

                //sobrevivientes y muertes por clase
                new Chart(document.getElementById("cuartochart").getContext("2d"), {
                    type: "bar",
                    data: {
                        labels: ["aparece mas de 2 temporadas", "aparece menos de 2 temporadas"],
                        datasets: [
                            { data: [masDeDos, menosDeDos], label: "aparecen en mas de 2 temporadas", backgroundColor: ["#8CB1E5", "#9EBCDA"] },

                        ],
                    },
                    options: {
                        indexAxis: "y",
                        animation: false,
                        layout: {
                            padding: 10,
                        },
                    },
                    plugins: {
                       legend: {
                         position: 'right',
                       },
                       title: {
                         display: true,
                         text: 'Chart.js Horizontal Bar Chart'
                       }
                     },
                });

                //sobrevivientes y muertes por edad y sexo (mujeres y niños primero)
                new Chart(document.getElementById("quintochart").getContext("2d"), {
                    type: "bar",
                    data: {
                        labels: ["Mujeres", "Niños", "Hombres"],
                        datasets: [
                            { data: [mujeresSalvadas, ninesSalvades, hombresSalvados], label: "Sobreviven", backgroundColor: ["#8CB1E5"] },
                            { data: [mujeresMuertas, ninesMuertes, hombresMuertos], label: "Mueren", backgroundColor: ["#334"] },
                        ],
                    },
                    options: {
                        indexAxis: "y",
                        animation: false,
                        layout: {
                            padding: 10,
                        },
                    },
                });
            }
            todo().catch((error) => console.error(error));
        </script>
        <!--otro para los extras-->
        <script>
            // No todo se resuelve con pie, doughthout o barras, a veces se necesitan otros gráficos

            async function otro() {
                //el fetch
                const consulta = await fetch("https://raw.githubusercontent.com/facoasecas/datos_varios/main/paises.json");
                const data = await consulta.json();
                var puntos = [];
                var burbujas = [];
                data.forEach((d) => {
                    let info = { x: d.pib_per_capita, y: d.idh, pais: d.pais };
                    let mas = { x: d.pib_per_capita, y: d.idh, r: Math.round(d.poblacion / 50000000), pais: d.pais };
                    puntos.push(info);
                    burbujas.push(mas);
                });
                console.log(burbujas);
                //Gráfico de dispersión
                //Para evidenciar si existe una relación o correlación entre las dos variables
                new Chart(document.getElementById("disperso").getContext("2d"), {
                    type: "scatter",
                    data: {
                        datasets: [
                            {
                                label: "Índice de desarrollo humano y renta per cápita",
                                data: puntos,
                                backgroundColor: "rgba(0,100,255,.5)",
                                pointRadius: 5,
                            },
                        ],
                    },
                    options: {
                        animation: false,
                        scales: {
                            x: {
                                max:140000,
                                ticks: {
                                    callback: function (numero) {
                                        return "€ " + numero.toLocaleString("es-CL");
                                    }
                                }
                            }
                        },
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: (context) => {
                                        console.log(context);
                                        return context.raw.pais + " tiene un PIB per cápita de € " + context.raw.x.toLocaleString("es-CL");
                                    },
                                }
                            },
                        },
                    },
                });
                //Gráfico de burbujas
                //Para analizar patrones o correlaciones de dos valores, considerando un tercer valor que se presenta en su radio
                new Chart(document.getElementById("burbujeante").getContext("2d"), {
                    type: "bubble",
                    data: {
                        datasets: [
                            {
                                label: "Índice de desarrollo humano y renta per cápita, con población",
                                data: burbujas,
                                backgroundColor: "rgba(0,100,255,.5)",
                                pointRadius: 5,
                            },
                        ],
                    },
                    options: {
                        animation: false,
                        scales: {
                            x: {
                                max:140000,
                                ticks: {
                                    callback: function (numero) {
                                        return "€ " + numero.toLocaleString("es-CL");
                                    }
                                }
                            }
                        },
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: (context) => {
                                        console.log(context);
                                        return context.raw.pais + " tiene un PIB per cápita de € " + context.raw.x.toLocaleString("es-CL");
                                    },
                                },
                            },
                        },
                    },
                });
            }
            otro().catch((error) => console.error(error));
        </script>
    </body>
</html>
